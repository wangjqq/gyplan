"use strict";(self["webpackChunkgyplan"]=self["webpackChunkgyplan"]||[]).push([[456],{456:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"height: 100%; overflow: auto;"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:1}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addFormVisible=!0}}},[t._v("添加")])],1),e("el-col",{attrs:{span:6}},[e("el-cascader",{attrs:{options:t.ImsOptions,props:{expandTrigger:"hover"},placeholder:"选择分类"},on:{change:t.chooesTypeChange},model:{value:t.chooesType,callback:function(e){t.chooesType=e},expression:"chooesType"}})],1)],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ImsList}},[e("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),e("el-table-column",{attrs:{prop:"type_name",label:"类型",width:"180"}}),e("el-table-column",{attrs:{prop:"package",label:"封装"}}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"description",label:"描述"}}),e("el-table-column",{attrs:{prop:"quantity",label:"数量"}}),e("el-table-column",{attrs:{prop:"description",label:"描述"}}),e("el-table-column",{attrs:{prop:"voltage",label:"最大电压"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(""==a.row.voltage?"":a.row.voltage+"V"))])]}}])}),e("el-table-column",{attrs:{prop:"electricity",label:"最大电流"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(""==a.row.electricity?"":a.row.electricity+"A"))])]}}])}),e("el-table-column",{attrs:{prop:"size",label:"尺寸"}}),e("el-table-column",{attrs:{prop:"smt",label:"焊接方式"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s("1"==a.row.smt?"贴片":"直插"))])]}}])}),e("el-table-column",{attrs:{prop:"price",label:"参考价格"}})],1),e("el-dialog",{attrs:{title:"添加元器件",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[e("el-form",{attrs:{model:t.addform}},[e("el-form-item",{attrs:{label:"元器件分类:"}},[e("el-cascader",{attrs:{options:t.ImsOptions},model:{value:t.addform.type_id,callback:function(e){t.$set(t.addform,"type_id",e)},expression:"addform.type_id"}}),e("el-button",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"10px"},on:{click:function(e){t.addTypeVisible=!0}}},[t._v("新建")])],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"名称:"}},[e("el-input",{staticStyle:{width:"204px"},model:{value:t.addform.name,callback:function(e){t.$set(t.addform,"name",e)},expression:"addform.name"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"封装:"}},[e("el-input",{staticStyle:{width:"204px"},model:{value:t.addform.package,callback:function(e){t.$set(t.addform,"package",e)},expression:"addform.package"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"数量:"}},[e("el-input",{staticStyle:{width:"204px"},model:{value:t.addform.quantity,callback:function(e){t.$set(t.addform,"quantity",e)},expression:"addform.quantity"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"单价:"}},[e("el-input",{staticStyle:{width:"204px"},model:{value:t.addform.price,callback:function(e){t.$set(t.addform,"price",e)},expression:"addform.price"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"最大电压:"}},[e("el-input",{staticStyle:{width:"204px"},model:{value:t.addform.voltage,callback:function(e){t.$set(t.addform,"voltage",e)},expression:"addform.voltage"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"最大电流:"}},[e("el-input",{staticStyle:{width:"204px"},model:{value:t.addform.electricity,callback:function(e){t.$set(t.addform,"electricity",e)},expression:"addform.electricity"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"尺寸:"}},[e("el-input",{staticStyle:{width:"204px"},model:{value:t.addform.size,callback:function(e){t.$set(t.addform,"size",e)},expression:"addform.size"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"焊接方式:"}},[e("el-radio-group",{model:{value:t.addform.smt,callback:function(e){t.$set(t.addform,"smt",e)},expression:"addform.smt"}},[e("el-radio",{attrs:{label:1}},[t._v("贴片")]),e("el-radio",{attrs:{label:0}},[t._v("直插")])],1)],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"描述:"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3}},model:{value:t.addform.description,callback:function(e){t.$set(t.addform,"description",e)},expression:"addform.description"}})],1)],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addFormVisible=!1,t.addItem()}}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"新建元器件分类",visible:t.addTypeVisible},on:{"update:visible":function(e){t.addTypeVisible=e}}},[e("el-form",{attrs:{model:t.newTypeForm}},[e("el-form-item",{attrs:{label:"选择父级分类:"}},[e("el-cascader",{attrs:{options:t.ImsOptions,props:{checkStrictly:!0}},model:{value:t.newTypeForm.type_father_id,callback:function(e){t.$set(t.newTypeForm,"type_father_id",e)},expression:"newTypeForm.type_father_id"}})],1),e("el-form-item",{attrs:{label:"新建分类名称:"}},[e("el-input",{staticStyle:{width:"204px"},model:{value:t.newTypeForm.type_name,callback:function(e){t.$set(t.newTypeForm,"type_name",e)},expression:"newTypeForm.type_name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addTypeVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addTypeVisible=!1,t.addItemType()}}},[t._v("确 定")])],1)],1)],1)},i=[],s=(a(2262),a(4506),a(4471));function o(){return(0,s.Z)({url:"/api/ims/getAllImsList",method:"get"})}function r(t){return(0,s.Z)({url:"/api/ims/getImsListByType",method:"get",params:t})}function d(){return(0,s.Z)({url:"/api/ims/getTypeList",method:"get"})}function n(t){return(0,s.Z)({url:"/api/ims/addItemType",method:"post",params:t})}function p(t){return(0,s.Z)({url:"/api/ims/addItem",method:"post",params:t})}var c={data(){return{ImsList:[],ImsOptions:[],ImsOptionsOld:[],chooesType:"",addFormVisible:!1,addTypeVisible:!1,addform:{type_id:"",type_name:"",type_father_id:"",package:"",electricity:"",description:"",voltage:"",name:"",quantity:"",price:"",smt:"",size:""},newTypeForm:{type_name:"",type_father_id:""}}},created(){this.getAllImsList(),this.getTypeList()},methods:{async chooesTypeChange(t){console.log(t.at(-1));let e={type_id:t.at(-1)},a=await r(e);200==a.status&&(this.ImsList=a.data,this.$message.success(a.message)),console.log(a)},async getAllImsList(){let t=await o();this.ImsList=t.data,console.log(t)},async getTypeList(){let t=await d();console.log(t),t.data.forEach((t=>{t.value=t.id,t.label=t.type_name})),this.ImsOptionsOld=t.data;for(var e=[],a=0;a<t.data.length;a++)for(var l=[],i=0;i<t.data.length;i++)t.data[a].id==t.data[i].type_father_id&&(t.data[a].children=l,l.push(t.data[i]));for(a=0;a<t.data.length;a++)0==t.data[a].type_father_id&&e.push(t.data[a]);this.ImsOptions=e},async addItemType(){this.newTypeForm.type_father_id=this.newTypeForm.type_father_id.at(-1),console.log(this.newTypeForm.type_father_id);let t={type_name:this.newTypeForm.type_name,type_father_id:this.newTypeForm.type_father_id},e=await n(t);console.log(e),200==e.status&&(this.getTypeList(),this.$message.success(e.message),this.newTypeForm={type_name:"",type_father_id:""})},async addItem(){this.addform.type_id=this.addform.type_id.at(-1),this.ImsOptionsOld.forEach((t=>{t.id==this.addform.type_id&&(this.addform.type_name=t.type_name,this.addform.type_father_id=t.type_father_id)}));let t={type_id:this.addform.type_id,type_name:this.addform.type_name,type_father_id:this.addform.type_father_id,package:this.addform.package,voltage:this.addform.voltage,electricity:this.addform.electricity,description:this.addform.description,name:this.addform.name,quantity:this.addform.quantity,price:this.addform.price,smt:this.addform.smt,name:this.addform.name,size:this.addform.size},e=await p(t);200==e.status&&(this.getAllImsList(),this.$message.success(e.message),this.addform={type_id:"",type_name:"",type_father_id:"",package:"",electricity:"",description:"",voltage:"",name:"",quantity:"",price:"",smt:"",size:""})}}},m=c,f=a(1001),u=(0,f.Z)(m,l,i,!1,null,null,null),y=u.exports},2262:function(t,e,a){var l=a(2109),i=a(7908),s=a(6244),o=a(9303),r=a(1223);l({target:"Array",proto:!0},{at:function(t){var e=i(this),a=s(e),l=o(t),r=l>=0?l:a+l;return r<0||r>=a?void 0:e[r]}}),r("at")},4506:function(t,e,a){var l=a(2109),i=a(1702),s=a(4488),o=a(9303),r=a(1340),d=a(7293),n=i("".charAt),p=d((function(){return"\ud842"!=="𠮷".at(-2)}));l({target:"String",proto:!0,forced:p},{at:function(t){var e=r(s(this)),a=e.length,l=o(t),i=l>=0?l:a+l;return i<0||i>=a?void 0:n(e,i)}})}}]);
//# sourceMappingURL=456.02199dde.js.map