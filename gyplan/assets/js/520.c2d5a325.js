"use strict";(self["webpackChunkgyplan"]=self["webpackChunkgyplan"]||[]).push([[520],{9520:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"height: 100%; overflow: auto;"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:1}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addFormVisible=!0}}},[e._v("添加")])],1),t("el-col",{attrs:{span:6}},[t("el-cascader",{attrs:{options:e.ImsOptions,props:{expandTrigger:"hover"},placeholder:"选择分类"},on:{change:e.chooesTypeChange},model:{value:e.chooesType,callback:function(t){e.chooesType=t},expression:"chooesType"}})],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ImsList,border:"","row-class-name":e.tableRowClassName}},[t("el-table-column",{attrs:{prop:"id",sortable:"",label:"id",width:"60","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"type_name",sortable:"",label:"分类",width:"180","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"package",sortable:"",label:"封装","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"name",label:"名称","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"place",label:"存放地点","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"quantity",label:"数量","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"description",label:"描述","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"voltage",label:"最大电压","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(""==a.row.voltage?"":a.row.voltage+"V"))])]}}])}),t("el-table-column",{attrs:{prop:"electricity",label:"最大电流","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(""==a.row.electricity?"":a.row.electricity+"A"))])]}}])}),t("el-table-column",{attrs:{prop:"size",label:"尺寸",align:"center"}}),t("el-table-column",{attrs:{prop:"smt",sortable:"",label:"焊接方式","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s("1"==a.row.smt?"贴片":"直插"))])]}}])}),t("el-table-column",{attrs:{prop:"price",label:"参考价格","header-align":"center",align:"center"}})],1),t("el-dialog",{attrs:{title:"添加元器件",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t}}},[t("el-form",{attrs:{model:e.addform}},[t("el-form-item",{attrs:{label:"元器件分类:"}},[t("el-cascader",{attrs:{options:e.ImsOptions},model:{value:e.addform.type_id,callback:function(t){e.$set(e.addform,"type_id",t)},expression:"addform.type_id"}}),t("el-button",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.addTypeVisible=!0}}},[e._v("新建")])],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"名称:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.addform.name,callback:function(t){e.$set(e.addform,"name",t)},expression:"addform.name"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"封装:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.addform.package,callback:function(t){e.$set(e.addform,"package",t)},expression:"addform.package"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"数量:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.addform.quantity,callback:function(t){e.$set(e.addform,"quantity",t)},expression:"addform.quantity"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"单价:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.addform.price,callback:function(t){e.$set(e.addform,"price",t)},expression:"addform.price"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"尺寸:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.addform.size,callback:function(t){e.$set(e.addform,"size",t)},expression:"addform.size"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"最大电压:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.addform.voltage,callback:function(t){e.$set(e.addform,"voltage",t)},expression:"addform.voltage"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"最大电流:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.addform.electricity,callback:function(t){e.$set(e.addform,"electricity",t)},expression:"addform.electricity"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"存放位置:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.addform.place,callback:function(t){e.$set(e.addform,"place",t)},expression:"addform.place"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"焊接方式:"}},[t("el-radio-group",{model:{value:e.addform.smt,callback:function(t){e.$set(e.addform,"smt",t)},expression:"addform.smt"}},[t("el-radio",{attrs:{label:1}},[e._v("贴片")]),t("el-radio",{attrs:{label:0}},[e._v("直插")])],1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"描述:"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3}},model:{value:e.addform.description,callback:function(t){e.$set(e.addform,"description",t)},expression:"addform.description"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addFormVisible=!1,e.addItem()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"新建元器件分类",visible:e.addTypeVisible},on:{"update:visible":function(t){e.addTypeVisible=t}}},[t("el-form",{attrs:{model:e.newTypeForm}},[t("el-form-item",{attrs:{label:"选择父级分类:"}},[t("el-cascader",{attrs:{options:e.ImsOptions,props:{checkStrictly:!0}},model:{value:e.newTypeForm.type_father_id,callback:function(t){e.$set(e.newTypeForm,"type_father_id",t)},expression:"newTypeForm.type_father_id"}})],1),t("el-form-item",{attrs:{label:"新建分类名称:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.newTypeForm.type_name,callback:function(t){e.$set(e.newTypeForm,"type_name",t)},expression:"newTypeForm.type_name"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addTypeVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTypeVisible=!1,e.addItemType()}}},[e._v("确 定")])],1)],1)],1)},r=[],i=(a(2262),a(4506),a(4471));function o(){return(0,i.Z)({url:"/api/ims/getAllImsList",method:"get"})}function s(e){return(0,i.Z)({url:"/api/ims/getImsListByType",method:"get",params:e})}function n(){return(0,i.Z)({url:"/api/ims/getTypeList",method:"get"})}function d(e){return(0,i.Z)({url:"/api/ims/addItemType",method:"post",params:e})}function c(e){return(0,i.Z)({url:"/api/ims/addItem",method:"post",params:e})}var p={data(){return{ImsList:[],ImsOptions:[],ImsOptionsOld:[],chooesType:"",addFormVisible:!1,addTypeVisible:!1,addform:{type_id:"",type_name:"",type_father_id:"",package:"",electricity:"",description:"",voltage:"",name:"",quantity:"",price:"",smt:"",size:"",place:""},newTypeForm:{type_name:"",type_father_id:""}}},created(){this.getAllImsList(),this.getTypeList()},methods:{async chooesTypeChange(e){console.log(e.at(-1));let t={type_id:e.at(-1)},a=await s(t);200==a.status&&(this.ImsList=a.data,this.$message.success(a.message)),console.log(a)},tableRowClassName({row:e,rowIndex:t}){return 0==e.quantity?"warning-row":""},async getAllImsList(){let e=await o();this.ImsList=e.data,console.log(e)},async getTypeList(){let e=await n();console.log(e),e.data.forEach((e=>{e.value=e.id,e.label=e.type_name})),this.ImsOptionsOld=e.data;for(var t=[],a=0;a<e.data.length;a++)for(var l=[],r=0;r<e.data.length;r++)e.data[a].id==e.data[r].type_father_id&&(e.data[a].children=l,l.push(e.data[r]));for(a=0;a<e.data.length;a++)0==e.data[a].type_father_id&&t.push(e.data[a]);this.ImsOptions=t},async addItemType(){this.newTypeForm.type_father_id=this.newTypeForm.type_father_id.at(-1),console.log(this.newTypeForm.type_father_id);let e={type_name:this.newTypeForm.type_name,type_father_id:this.newTypeForm.type_father_id},t=await d(e);console.log(t),200==t.status&&(this.getTypeList(),this.$message.success(t.message),this.newTypeForm={type_name:"",type_father_id:""})},async addItem(){console.log(typeof this.addform.type_id),"object"==typeof this.addform.type_id&&(this.addform.type_id=this.addform.type_id.at(-1)),this.ImsOptionsOld.forEach((e=>{e.id==this.addform.type_id&&(this.addform.type_name=e.type_name,this.addform.type_father_id=e.type_father_id)}));let e={type_id:this.addform.type_id,type_name:this.addform.type_name,type_father_id:this.addform.type_father_id,package:this.addform.package,voltage:this.addform.voltage,electricity:this.addform.electricity,description:this.addform.description,name:this.addform.name,quantity:this.addform.quantity,price:this.addform.price,smt:this.addform.smt,name:this.addform.name,size:this.addform.size,place:this.addform.place},t=await c(e);200==t.status&&(this.getAllImsList(),this.$message.success(t.message))}}},m=p,f=a(1001),u=(0,f.Z)(m,l,r,!1,null,null,null),y=u.exports},2262:function(e,t,a){var l=a(2109),r=a(7908),i=a(6244),o=a(9303),s=a(1223);l({target:"Array",proto:!0},{at:function(e){var t=r(this),a=i(t),l=o(e),s=l>=0?l:a+l;return s<0||s>=a?void 0:t[s]}}),s("at")},4506:function(e,t,a){var l=a(2109),r=a(1702),i=a(4488),o=a(9303),s=a(1340),n=a(7293),d=r("".charAt),c=n((function(){return"\ud842"!=="𠮷".at(-2)}));l({target:"String",proto:!0,forced:c},{at:function(e){var t=s(i(this)),a=t.length,l=o(e),r=l>=0?l:a+l;return r<0||r>=a?void 0:d(t,r)}})}}]);
//# sourceMappingURL=520.c2d5a325.js.map