"use strict";(self["webpackChunkgyplan"]=self["webpackChunkgyplan"]||[]).push([[177],{3177:function(e,t,l){l.r(t),l.d(t,{default:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")]),[0==e.structureListDataNew[0].is_knowledge_point?t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.structureListDataNew,stripe:"",border:""},on:{"row-click":e.tableRowClick}},[t("el-table-column",{attrs:{prop:"id",label:"id",width:"180","header-align":"center"}}),t("el-table-column",{attrs:{prop:"name",label:"题目名",width:"180","header-align":"center"}}),t("el-table-column",{attrs:{prop:"answer",label:"题解",width:"180","header-align":"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"state",label:"状态",width:"220","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-rate",{attrs:{"show-text":"",disabled:"",texts:e.stateTexts},model:{value:l.row.state,callback:function(t){e.$set(l.row,"state",t)},expression:"scope.row.state"}})]}}],null,!1,3544826804)}),t("el-table-column",{attrs:{prop:"difficulty",label:"难度",width:"200","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-rate",{attrs:{"show-text":"",disabled:"",texts:e.difficultyTexts},model:{value:l.row.difficulty,callback:function(t){e.$set(l.row,"difficulty",t)},expression:"scope.row.difficulty"}})]}}],null,!1,2444484084)}),t("el-table-column",{attrs:{prop:"my_answer",label:"我的答案",width:"180","header-align":"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",width:"200","header-align":"center"}})],1):t("div",[t("el-cascader",{attrs:{options:e.knowledgeOptions,placeholder:"选择知识点分类"},model:{value:e.form.knowledgeType,callback:function(t){e.$set(e.form,"knowledgeType",t)},expression:"form.knowledgeType"}}),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.structureListDataNew,stripe:"",border:""},on:{"row-click":e.tableRowClick}},[t("el-table-column",{attrs:{prop:"id",label:"id",width:"180","header-align":"center"}}),t("el-table-column",{attrs:{prop:"knowledgeType",label:"知识点分类",width:"180","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"key_point_name",label:"知识点名称",width:"180","header-align":"center"}}),t("el-table-column",{attrs:{prop:"key_point_content",label:"知识点内容",width:"180","header-align":"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",width:"200","header-align":"center"}})],1)],1)],t("el-dialog",{attrs:{title:"添加",visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"添加:"}},[[t("el-radio",{attrs:{label:"0"},model:{value:e.form.is_knowledge_point,callback:function(t){e.$set(e.form,"is_knowledge_point",t)},expression:"form.is_knowledge_point"}},[e._v("添加题目")]),t("el-radio",{attrs:{label:"1"},model:{value:e.form.is_knowledge_point,callback:function(t){e.$set(e.form,"is_knowledge_point",t)},expression:"form.is_knowledge_point"}},[e._v("添加知识点")])]],2),1==e.form.is_knowledge_point?t("div",[t("el-form-item",{attrs:{label:"选择知识点分类:"}},[t("el-cascader",{attrs:{options:e.knowledgeOptions},model:{value:e.form.knowledgeType,callback:function(t){e.$set(e.form,"knowledgeType",t)},expression:"form.knowledgeType"}}),t("el-button",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.addKeyTypeFormVisible=!0}}},[e._v("新建")])],1),t("el-form-item",{attrs:{label:"知识点名称:"}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.form.key_point_name,callback:function(t){e.$set(e.form,"key_point_name",t)},expression:"form.key_point_name"}})],1),t("el-form-item",{attrs:{label:"知识点内容:"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form.key_point_content,callback:function(t){e.$set(e.form,"key_point_content",t)},expression:"form.key_point_content"}})],1)],1):e._e(),0==e.form.is_knowledge_point?t("div",[t("el-form-item",{attrs:{label:"题目:"}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"题目描述:"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),t("el-form-item",{attrs:{label:"题目解答:"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form.answer,callback:function(t){e.$set(e.form,"answer",t)},expression:"form.answer"}})],1),t("el-form-item",{attrs:{label:"题目状态:"}},[[t("el-radio",{attrs:{label:"1"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("未开始")]),t("el-radio",{attrs:{label:"2"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("尝试过")]),t("el-radio",{attrs:{label:"3"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("多次尝试过")]),t("el-radio",{attrs:{label:"4"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("已解答")]),t("el-radio",{attrs:{label:"5"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("已牢记")])]],2),t("el-form-item",{attrs:{label:"难度:"}},[[t("el-radio",{staticStyle:{"margin-left":"27px"},attrs:{label:"1"},model:{value:e.form.difficulty,callback:function(t){e.$set(e.form,"difficulty",t)},expression:"form.difficulty"}},[e._v("简单")]),t("el-radio",{staticStyle:{"margin-left":"16px"},attrs:{label:"2"},model:{value:e.form.difficulty,callback:function(t){e.$set(e.form,"difficulty",t)},expression:"form.difficulty"}},[e._v("较简单")]),t("el-radio",{staticStyle:{"margin-left":"13px"},attrs:{label:"3"},model:{value:e.form.difficulty,callback:function(t){e.$set(e.form,"difficulty",t)},expression:"form.difficulty"}},[e._v("较难")]),t("el-radio",{staticStyle:{"margin-left":"13px"},attrs:{label:"4"},model:{value:e.form.difficulty,callback:function(t){e.$set(e.form,"difficulty",t)},expression:"form.difficulty"}},[e._v("难")]),t("el-radio",{staticStyle:{"margin-left":"13px"},attrs:{label:"5"},model:{value:e.form.difficulty,callback:function(t){e.$set(e.form,"difficulty",t)},expression:"form.difficulty"}},[e._v("极难")])]],2),t("el-form-item",{attrs:{label:"我的答案:"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form.my_answer,callback:function(t){e.$set(e.form,"my_answer",t)},expression:"form.my_answer"}})],1)],1):e._e(),t("el-form-item",{attrs:{label:"备注:"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1,e.addDataStructure()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"新建",visible:e.addKeyTypeFormVisible},on:{"update:visible":function(t){e.addKeyTypeFormVisible=t}}},[t("el-form",{attrs:{model:e.newKeyTypeForm}},[t("el-form-item",{attrs:{label:"选择分类:"}},[t("el-cascader",{staticStyle:{"margin-left":"28px"},attrs:{options:e.knowledgeOptions,props:{checkStrictly:!0}},model:{value:e.knowledgeType,callback:function(t){e.knowledgeType=t},expression:"knowledgeType"}})],1),t("el-form-item",{attrs:{label:"新建:"}},[[t("el-radio",{staticStyle:{"margin-left":"63px"},attrs:{label:"0"},model:{value:e.newKeyTypeForm.newKeyType,callback:function(t){e.$set(e.newKeyTypeForm,"newKeyType",t)},expression:"newKeyTypeForm.newKeyType"}},[e._v("父级分类")]),t("el-radio",{attrs:{label:"1"},model:{value:e.newKeyTypeForm.newKeyType,callback:function(t){e.$set(e.newKeyTypeForm,"newKeyType",t)},expression:"newKeyTypeForm.newKeyType"}},[e._v("同级分类")]),t("el-radio",{attrs:{label:"2"},model:{value:e.newKeyTypeForm.newKeyType,callback:function(t){e.$set(e.newKeyTypeForm,"newKeyType",t)},expression:"newKeyTypeForm.newKeyType"}},[e._v("子级分类")])]],2),t("el-form-item",{attrs:{label:"新建分类名称:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.newKeyTypeForm.newKeyName,callback:function(t){e.$set(e.newKeyTypeForm,"newKeyName",t)},expression:"newKeyTypeForm.newKeyName"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addKeyTypeFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addKeyTypeFormVisible=!1,e.addDataStructureKeyType()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"知识详情",visible:e.knowledgeDetailPageVisible},on:{"update:visible":function(t){e.knowledgeDetailPageVisible=t}}},[t("el-form",{attrs:{model:e.knowledgeDetail}},[t("el-form-item",{attrs:{label:"知识ID:"}},[e._v(" "+e._s(e.knowledgeDetail.id)+" ")]),t("div",[t("el-form-item",{attrs:{label:"题目名称:"}},[t("el-input",{staticStyle:{width:"204px"},model:{value:e.knowledgeDetail.name,callback:function(t){e.$set(e.knowledgeDetail,"name",t)},expression:"knowledgeDetail.name"}})],1),t("el-form-item",{attrs:{label:"创建时间:"}},[e._v(" "+e._s(e.knowledgeDetail.createdTime)+" ")]),t("el-form-item",{attrs:{label:"题目状态:"}},[t("el-rate",{attrs:{"show-text":"",texts:e.stateTexts},model:{value:e.knowledgeDetail.state,callback:function(t){e.$set(e.knowledgeDetail,"state",t)},expression:"knowledgeDetail.state"}})],1),t("el-form-item",{attrs:{label:"题目难度:"}},[t("el-rate",{attrs:{"show-text":"",texts:e.difficultyTexts},model:{value:e.knowledgeDetail.difficulty,callback:function(t){e.$set(e.knowledgeDetail,"difficulty",t)},expression:"knowledgeDetail.difficulty"}})],1),t("el-form-item",{attrs:{label:"题目描述:"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.knowledgeDetail.description,callback:function(t){e.$set(e.knowledgeDetail,"description",t)},expression:"knowledgeDetail.description"}})],1),t("el-form-item",{attrs:{label:"我的答案:"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.knowledgeDetail.my_answer,callback:function(t){e.$set(e.knowledgeDetail,"my_answer",t)},expression:"knowledgeDetail.my_answer"}})],1),t("el-form-item",{attrs:{label:"题目答案:"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.knowledgeDetail.answer,callback:function(t){e.$set(e.knowledgeDetail,"answer",t)},expression:"knowledgeDetail.answer"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.knowledgeDetailPageVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDataStructure(1),e.knowledgeDetailPageVisible=!1}}},[e._v("保存编辑")])],1)],1)],2)},o=[],i=l(3465),r={data(){return{stateTexts:["未开始","尝试过","已解答","已多次解答","已牢记"],difficultyTexts:["简单","较简单","较难","难","极难"],structureListData:[],structureListDataNew:[{is_knowledge_point:0}],dialogFormVisible:!1,addKeyTypeFormVisible:!1,knowledgeDetailPageVisible:!1,knowledgeType:[],knowledgeOptions:[],knowledgeOptionsOld:[],options:[{value:"0",label:"题目"},{value:"1",label:"知识点"}],typeValue:"0",form:{id:"",name:"",description:"",answer:"",state:"",difficulty:"",my_answer:"",is_knowledge_point:"0",knowledgeType:[],key_point_name:"",key_point_content:"",note:""},newKeyTypeForm:{newKeyType:"",newKeyName:"",newKeyFatherId:""},knowledgeDetail:{}}},watch:{"newKeyTypeForm.newKeyType"(){if("0"==this.newKeyTypeForm.newKeyType){let e="";this.knowledgeOptionsOld.map((t=>{t.id==this.knowledgeType[this.knowledgeType.length-2]&&(e=t.father_id)})),this.newKeyTypeForm.newKeyFatherId=e}else"1"==this.newKeyTypeForm.newKeyType?this.newKeyTypeForm.newKeyFatherId=this.knowledgeType[this.knowledgeType.length-2]:this.newKeyTypeForm.newKeyFatherId=this.knowledgeType[this.knowledgeType.length-1];console.log(this.knowledgeType+" "+this.newKeyTypeForm.newKeyFatherId)},typeValue:{handler:"getNewStructureListData"}},created(){this.getDataStructureList(),this.getDataStructureKeyTypeList()},methods:{async getDataStructureList(){let e=await(0,i.xN)();e.data!=[]&&(this.structureListData=e.data,this.getNewStructureListData())},async getDataStructureKeyTypeList(){let e=await(0,i.nV)();e.data.forEach((e=>{e.value=e.id})),this.knowledgeOptionsOld=e.data;for(var t=[],l=0;l<e.data.length;l++)for(var a=[],o=0;o<e.data.length;o++)e.data[l].id==e.data[o].father_id&&(e.data[l].children=a,a.push(e.data[o]));for(l=0;l<e.data.length;l++)0==e.data[l].father_id&&t.push(e.data[l]);this.knowledgeOptions=t},async addDataStructureKeyType(){let e={name:this.newKeyTypeForm.newKeyName,father_id:this.newKeyTypeForm.newKeyFatherId},t=await(0,i.sS)(e);console.log(t),200==t.status&&(this.getDataStructureKeyTypeList(),this.$message.success(t.message))},async addDataStructure(e){1!=e?(console.log(this.form.knowledgeType),this.form.knowledgeType=this.form.knowledgeType[this.form.knowledgeType.length-1],console.log(this.form.knowledgeType)):this.form=this.knowledgeDetail;let t=this.form,l=await(0,i.AZ)(t);if(200==l.status)return this.getDataStructureList(),this.$message.success(l.message),void(this.form={id:"",name:"",description:"",answer:"",state:"",difficulty:"",my_answer:"",is_knowledge_point:"0",knowledgeType:[],key_point_name:"",key_point_content:"",note:""});this.$message.error(l.message)},getNewStructureListData(){this.structureListDataNew=[],"0"==this.typeValue?this.structureListData.forEach((e=>{"0"==e.is_knowledge_point&&this.structureListDataNew.push(e)})):"1"==this.typeValue&&this.structureListData.forEach((e=>{"1"==e.is_knowledge_point&&(this.knowledgeOptionsOld.forEach((t=>{t.id==e.knowledgeType&&(e.knowledgeType=t.label)})),this.structureListDataNew.push(e))}))},tableRowClick(e,t,l){this.knowledgeDetailPageVisible=!0,this.knowledgeDetail=e}}},n=r,s=l(1001),d=(0,s.Z)(n,a,o,!1,null,"292fb03a",null),c=d.exports},3465:function(e,t,l){l.d(t,{AZ:function(){return s},eU:function(){return o},nV:function(){return r},sS:function(){return n},xN:function(){return i}});var a=l(4471);function o(){return(0,a.Z)({url:"/api/knowledge/getKnowledgeList",method:"get"})}function i(){return(0,a.Z)({url:"/api/knowledge/getDataStructureList",method:"get"})}function r(){return(0,a.Z)({url:"/api/knowledge/getDataStructureKeyTypeList",method:"get"})}function n(e){return(0,a.Z)({url:"/api/knowledge/addDataStructureKeyType",method:"post",params:e})}function s(e){return(0,a.Z)({url:"/api/knowledge/addDataStructure",method:"post",params:e})}}}]);
//# sourceMappingURL=177.c945fb4d.js.map